[gd_scene load_steps=66 format=3 uid="uid://c3kdff65tnyxu"]

[ext_resource type="Script" uid="uid://cas1vuvfuctsr" path="res://game/rollercoaster/rollercoaster.gd" id="1_fpfh7"]
[ext_resource type="Shader" uid="uid://coelylstno2qo" path="res://game/shaders/squash_and_stretch.gdshader" id="2_y8uoc"]
[ext_resource type="Script" uid="uid://c03h3xluod86s" path="res://game/state_machine/state_machine.gd" id="3_nmpxg"]
[ext_resource type="Texture2D" uid="uid://dymfq5h55luqx" path="res://assets/railcarsprites.png" id="3_rsh2y"]
[ext_resource type="Script" uid="uid://cgxc1m8epbsvj" path="res://game/rollercoaster/states/stopped_state.gd" id="4_8bbrx"]
[ext_resource type="Script" uid="uid://bvpch57cprwa7" path="res://game/rollercoaster/states/moving_on_rails_state.gd" id="5_1ove5"]
[ext_resource type="Script" uid="uid://btuxrxldtn8mr" path="res://game/rollercoaster/states/jumping_state.gd" id="5_j853t"]
[ext_resource type="AudioStream" uid="uid://bf2lkkjouh2ly" path="res://game/rollercoaster/states/moving_sound.mp3" id="6_0cxb7"]
[ext_resource type="Script" uid="uid://hstyt5t0d27f" path="res://game/rollercoaster/states/falling_state.gd" id="6_hr1qv"]
[ext_resource type="Script" uid="uid://ctcv17rs0l5ir" path="res://game/rollercoaster/player_controller.gd" id="6_pce4i"]
[ext_resource type="AudioStream" uid="uid://b6kdgd77itc63" path="res://game/rollercoaster/states/jump_sound.wav" id="7_y8uoc"]
[ext_resource type="Script" uid="uid://d1pnsgn8hit3i" path="res://game/rollercoaster/states/station_state.gd" id="9_rsh2y"]
[ext_resource type="AudioStream" uid="uid://dqymmad0tv36s" path="res://game/rollercoaster/states/landing_sound.wav" id="10_b70cr"]
[ext_resource type="AudioStream" uid="uid://fk3rboyyo5o2" path="res://game/rollercoaster/states/falling_sound.wav" id="10_yw4u4"]
[ext_resource type="Script" uid="uid://cqxg0n4agnmx4" path="res://game/rollercoaster/camera.gd" id="15_8v57q"]
[ext_resource type="PackedScene" uid="uid://ditcfcjt55exv" path="res://game/screen_shake/screen_shake.tscn" id="16_p2xsc"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_0cxb7"]
shader = ExtResource("2_y8uoc")
shader_parameter/deformation = Vector2(0, 0)
shader_parameter/sidewaysDeformationFactor = 3.0
shader_parameter/knockbackFactor = 0.001

[sub_resource type="AtlasTexture" id="AtlasTexture_y8uoc"]
atlas = ExtResource("3_rsh2y")
region = Rect2(192, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_0cxb7"]
atlas = ExtResource("3_rsh2y")
region = Rect2(192, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_yw4u4"]
atlas = ExtResource("3_rsh2y")
region = Rect2(128, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_wprvx"]
atlas = ExtResource("3_rsh2y")
region = Rect2(64, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_8v57q"]
atlas = ExtResource("3_rsh2y")
region = Rect2(64, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_l172d"]
atlas = ExtResource("3_rsh2y")
region = Rect2(64, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_afiiy"]
atlas = ExtResource("3_rsh2y")
region = Rect2(128, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_wtiv6"]
atlas = ExtResource("3_rsh2y")
region = Rect2(192, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_s2ekl"]
atlas = ExtResource("3_rsh2y")
region = Rect2(192, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_rsh2y"]
atlas = ExtResource("3_rsh2y")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_aksw1"]
atlas = ExtResource("3_rsh2y")
region = Rect2(0, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_7biaj"]
atlas = ExtResource("3_rsh2y")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_u4p42"]
atlas = ExtResource("3_rsh2y")
region = Rect2(0, 192, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_sr0gy"]
atlas = ExtResource("3_rsh2y")
region = Rect2(192, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_p2xsc"]
atlas = ExtResource("3_rsh2y")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_b70cr"]
atlas = ExtResource("3_rsh2y")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_7jkop"]
atlas = ExtResource("3_rsh2y")
region = Rect2(0, 320, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_0oxaf"]
atlas = ExtResource("3_rsh2y")
region = Rect2(0, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_yno1m"]
atlas = ExtResource("3_rsh2y")
region = Rect2(0, 256, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_e54ad"]
atlas = ExtResource("3_rsh2y")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_m22k8"]
atlas = ExtResource("3_rsh2y")
region = Rect2(192, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_eeca8"]
atlas = ExtResource("3_rsh2y")
region = Rect2(128, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_t5g5p"]
atlas = ExtResource("3_rsh2y")
region = Rect2(64, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_818x3"]
atlas = ExtResource("3_rsh2y")
region = Rect2(64, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_i6xmu"]
atlas = ExtResource("3_rsh2y")
region = Rect2(64, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_yh0bp"]
atlas = ExtResource("3_rsh2y")
region = Rect2(128, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_k3toj"]
atlas = ExtResource("3_rsh2y")
region = Rect2(192, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_wsxgt"]
atlas = ExtResource("3_rsh2y")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_33xk4"]
atlas = ExtResource("3_rsh2y")
region = Rect2(384, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_4i0yg"]
atlas = ExtResource("3_rsh2y")
region = Rect2(320, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_x10rd"]
atlas = ExtResource("3_rsh2y")
region = Rect2(256, 128, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_t1pdu"]
atlas = ExtResource("3_rsh2y")
region = Rect2(256, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_tixq0"]
atlas = ExtResource("3_rsh2y")
region = Rect2(256, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_lechv"]
atlas = ExtResource("3_rsh2y")
region = Rect2(320, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_56pqu"]
atlas = ExtResource("3_rsh2y")
region = Rect2(384, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_6etbs"]
atlas = ExtResource("3_rsh2y")
region = Rect2(192, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_s0lue"]
atlas = ExtResource("3_rsh2y")
region = Rect2(192, 64, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_wowmo"]
atlas = ExtResource("3_rsh2y")
region = Rect2(192, 192, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_oc1dd"]
atlas = ExtResource("3_rsh2y")
region = Rect2(128, 192, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_gtgrx"]
atlas = ExtResource("3_rsh2y")
region = Rect2(64, 192, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_fej83"]
atlas = ExtResource("3_rsh2y")
region = Rect2(64, 256, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_l7qpt"]
atlas = ExtResource("3_rsh2y")
region = Rect2(64, 320, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_pn1c1"]
atlas = ExtResource("3_rsh2y")
region = Rect2(128, 320, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_1s17x"]
atlas = ExtResource("3_rsh2y")
region = Rect2(192, 320, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_4sbtb"]
atlas = ExtResource("3_rsh2y")
region = Rect2(0, 0, 64, 64)

[sub_resource type="SpriteFrames" id="SpriteFrames_fpfh7"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_y8uoc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0cxb7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_yw4u4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wprvx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8v57q")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_l172d")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_afiiy")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wtiv6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_s2ekl")
}],
"loop": false,
"name": &"back_flip",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_rsh2y")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_aksw1")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7biaj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_u4p42")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_sr0gy")
}],
"loop": false,
"name": &"barrel_roll",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_p2xsc")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_b70cr")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7jkop")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0oxaf")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_yno1m")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_e54ad")
}],
"loop": false,
"name": &"flat_spin",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_s2ekl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_m22k8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_eeca8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_t5g5p")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_818x3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_i6xmu")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_yh0bp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_k3toj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_s2ekl")
}],
"loop": false,
"name": &"front_flip",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_wsxgt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_33xk4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4i0yg")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_x10rd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_t1pdu")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_tixq0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_lechv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_56pqu")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6etbs")
}],
"loop": true,
"name": &"heel_flip",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_s0lue")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wowmo")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_oc1dd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gtgrx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_fej83")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_l7qpt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_pn1c1")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1s17x")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_4sbtb")
}],
"loop": false,
"name": &"kick_flip",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_nmpxg"]
size = Vector2(26, 9)

[sub_resource type="Curve2D" id="Curve2D_hr1qv"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 99, 101, -1, 0, 0, 0, 200, 100)
}
point_count = 3

[node name="Rollercoaster" type="CharacterBody2D" node_paths=PackedStringArray("state_machine", "animations", "path", "path_follow", "camera")]
collision_layer = 2
collision_mask = 13
slide_on_ceiling = false
floor_stop_on_slope = false
floor_block_on_wall = false
floor_max_angle = 3.14159
floor_snap_length = 0.0
platform_on_leave = 2
platform_floor_layers = 4294967041
platform_wall_layers = 1
script = ExtResource("1_fpfh7")
state_machine = NodePath("StateMachine")
animations = NodePath("AnimatedSprite2D")
path = NodePath("AnimatePath")
path_follow = NodePath("AnimatePath/AnimatePathFollow")
camera = NodePath("Camera2D")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
material = SubResource("ShaderMaterial_0cxb7")
sprite_frames = SubResource("SpriteFrames_fpfh7")
animation = &"heel_flip"
offset = Vector2(0, -8)

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0, -9.5)
shape = SubResource("RectangleShape2D_nmpxg")

[node name="StateMachine" type="Node2D" parent="." node_paths=PackedStringArray("starting_state")]
script = ExtResource("3_nmpxg")
starting_state = NodePath("FallingState")

[node name="MovingOnRailsState" type="Node2D" parent="StateMachine" node_paths=PackedStringArray("jumping_state", "falling_state", "stopped_state", "station_state")]
script = ExtResource("5_1ove5")
jumping_state = NodePath("../JumpingState")
falling_state = NodePath("../FallingState")
stopped_state = NodePath("../StoppedState")
station_state = NodePath("../StationState")
moving_sound = ExtResource("6_0cxb7")

[node name="JumpingState" type="Node2D" parent="StateMachine" node_paths=PackedStringArray("moving_on_rails_state", "falling_state")]
script = ExtResource("5_j853t")
moving_on_rails_state = NodePath("../MovingOnRailsState")
falling_state = NodePath("../FallingState")
jump_sound = ExtResource("7_y8uoc")

[node name="FallingState" type="Node2D" parent="StateMachine" node_paths=PackedStringArray("moving_on_rails_state", "stopped_state")]
script = ExtResource("6_hr1qv")
moving_on_rails_state = NodePath("../MovingOnRailsState")
stopped_state = NodePath("../StoppedState")
falling_sound = ExtResource("10_yw4u4")
landing_sound = ExtResource("10_b70cr")

[node name="StoppedState" type="Node2D" parent="StateMachine"]
script = ExtResource("4_8bbrx")

[node name="StationState" type="Node2D" parent="StateMachine" node_paths=PackedStringArray("falling_state")]
script = ExtResource("9_rsh2y")
falling_state = NodePath("../FallingState")

[node name="PlayerController" type="Node2D" parent="."]
script = ExtResource("6_pce4i")

[node name="Camera2D" type="Camera2D" parent="."]
position_smoothing_speed = 100.0
script = ExtResource("15_8v57q")
min_zoom = 1.0
max_zoom = 2.0
max_speed = 1500.0

[node name="ScreenShake" parent="Camera2D" instance=ExtResource("16_p2xsc")]
shake_multiplier = 0.001
max_shake = 20.0

[node name="AnimatePath" type="Path2D" parent="."]
top_level = true
curve = SubResource("Curve2D_hr1qv")

[node name="AnimatePathFollow" type="PathFollow2D" parent="AnimatePath"]
position = Vector2(34.9969, 35.7039)
rotation = 0.795398
progress = 50.0
loop = false
